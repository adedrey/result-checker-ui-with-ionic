(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{RNyp:function(n,l,s){"use strict";s.r(l);var t=s("8Y7J");class e{}var i=s("pMnS"),u=s("oBZk"),a=s("ZZ/e"),r=s("iInd"),o=s("SVse");class b{constructor(){}ngOnInit(){}}var c=t.qb({encapsulation:0,styles:[[""]],data:{}});function g(n){return t.Nb(0,[(n()(),t.sb(0,0,null,null,11,"ion-item",[["detail",""]],null,[[null,"click"]],(function(n,l,s){var e=!0;return"click"===l&&(e=!1!==t.Eb(n,2).onClick()&&e),"click"===l&&(e=!1!==t.Eb(n,4).onClick(s)&&e),e}),u.ib,u.s)),t.rb(1,49152,null,0,a.G,[t.h,t.k,t.x],{detail:[0,"detail"]},null),t.rb(2,16384,null,0,r.n,[r.m,r.a,[8,null],t.C,t.k],{routerLink:[0,"routerLink"]},null),t.Fb(3,4),t.rb(4,737280,null,0,a.Kb,[o.j,a.Hb,t.k,r.m,[2,r.n]],null,null),(n()(),t.sb(5,0,null,0,6,"ion-label",[],null,null,null,u.jb,u.w)),t.rb(6,49152,null,0,a.M,[t.h,t.k,t.x],null,null),(n()(),t.sb(7,0,null,0,1,"h2",[],null,null,null,null,null)),(n()(),t.Lb(8,null,["",""])),(n()(),t.sb(9,0,null,0,2,"p",[],null,null,null,null,null)),(n()(),t.Lb(10,null,["Deadline: ",""])),t.Hb(11,1)],(function(n,l){n(l,1,0,"");var s=n(l,3,0,"/forum","tabs","assignments",l.context.$implicit._id);n(l,2,0,s),n(l,4,0)}),(function(n,l){n(l,8,0,l.context.$implicit.course_code);var s=t.Mb(l,10,0,n(l,11,0,t.Eb(l.parent,0),l.context.$implicit.submission_date));n(l,10,0,s)}))}function m(n){return t.Nb(0,[t.Gb(0,o.e,[t.s]),(n()(),t.hb(16777216,null,null,1,null,g)),t.rb(2,278528,null,0,o.l,[t.N,t.K,t.q],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){n(l,2,0,l.component.assignments)}),null)}var h=s("t8u9");class d{constructor(n,l){this.assignmentService=n,this.loadingCtrl=l,this.assignments=[]}ngOnInit(){this.assignmentService.getAssignments(),this.loadingCtrl.create({spinner:"lines-small"}).then(n=>{this.assignmentService.getAssignmentChanged().subscribe(l=>{n.present(),this.assignments=l,n.dismiss()})})}refresh(){this.loadingCtrl.create({spinner:"dots"}).then(n=>{n.present(),this.assignmentService.getAssignments(),n.dismiss()})}}var p=t.qb({encapsulation:0,styles:[[".custom-skeleton[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]{line-height:13px}.custom-skeleton[_ngcontent-%COMP%]   ion-skeleton-text[_ngcontent-%COMP%]:last-child{margin-bottom:5px}"]],data:{}});function k(n){return t.Nb(0,[(n()(),t.sb(0,0,null,null,16,"ion-header",[],null,null,null,u.bb,u.o)),t.rb(1,49152,null,0,a.A,[t.h,t.k,t.x],null,null),(n()(),t.sb(2,0,null,0,14,"ion-toolbar",[],null,null,null,u.zb,u.M)),t.rb(3,49152,null,0,a.Bb,[t.h,t.k,t.x],null,null),(n()(),t.sb(4,0,null,0,3,"ion-buttons",[["slot","start"]],null,null,null,u.Q,u.d)),t.rb(5,49152,null,0,a.k,[t.h,t.k,t.x],null,null),(n()(),t.sb(6,0,null,0,1,"ion-menu-button",[["menuId","first"]],null,null,null,u.lb,u.z)),t.rb(7,49152,null,0,a.Q,[t.h,t.k,t.x],null,null),(n()(),t.sb(8,0,null,0,5,"ion-buttons",[["slot","primary"]],null,null,null,u.Q,u.d)),t.rb(9,49152,null,0,a.k,[t.h,t.k,t.x],null,null),(n()(),t.sb(10,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(n,l,s){var t=!0;return"click"===l&&(t=!1!==n.component.refresh()&&t),t}),u.P,u.c)),t.rb(11,49152,null,0,a.j,[t.h,t.k,t.x],null,null),(n()(),t.sb(12,0,null,0,1,"ion-icon",[["name","refresh"],["slot","icon-only"]],null,null,null,u.cb,u.p)),t.rb(13,49152,null,0,a.B,[t.h,t.k,t.x],{name:[0,"name"]},null),(n()(),t.sb(14,0,null,0,2,"ion-title",[],null,null,null,u.yb,u.L)),t.rb(15,49152,null,0,a.zb,[t.h,t.k,t.x],null,null),(n()(),t.Lb(-1,0,["Assignment"])),(n()(),t.sb(17,0,null,null,9,"ion-content",[],null,null,null,u.X,u.k)),t.rb(18,49152,null,0,a.t,[t.h,t.k,t.x],null,null),(n()(),t.sb(19,0,null,0,7,"ion-grid",[],null,null,null,u.ab,u.n)),t.rb(20,49152,null,0,a.z,[t.h,t.k,t.x],null,null),(n()(),t.sb(21,0,null,0,5,"ion-row",[],null,null,null,u.ob,u.B)),t.rb(22,49152,null,0,a.ib,[t.h,t.k,t.x],null,null),(n()(),t.sb(23,0,null,0,3,"ion-col",[["offset-sm","2"],["size-sm","8"]],null,null,null,u.W,u.j)),t.rb(24,49152,null,0,a.s,[t.h,t.k,t.x],null,null),(n()(),t.sb(25,0,null,0,1,"app-assignment-item",[],null,null,null,m,c)),t.rb(26,114688,null,0,b,[],{assignments:[0,"assignments"]},null)],(function(n,l){var s=l.component;n(l,13,0,"refresh"),n(l,26,0,s.assignments)}),null)}function f(n){return t.Nb(0,[(n()(),t.sb(0,0,null,null,1,"app-assignments",[],null,null,null,k,p)),t.rb(1,114688,null,0,d,[h.a,a.Fb],null,null)],(function(n,l){n(l,1,0)}),null)}var C=t.ob("app-assignments",d,f,{},{},[]),x=s("s7LF");const v=()=>s.e(32).then(s.bind(null,"SkgG")).then(n=>n.AssDetailPageModuleNgFactory);class A{}s.d(l,"AssignmentsPageModuleNgFactory",(function(){return I}));var I=t.pb(e,[],(function(n){return t.Bb([t.Cb(512,t.j,t.ab,[[8,[i.a,C]],[3,t.j],t.v]),t.Cb(4608,o.o,o.n,[t.s,[2,o.B]]),t.Cb(4608,x.p,x.p,[]),t.Cb(4608,a.b,a.b,[t.x,t.g]),t.Cb(4608,a.Gb,a.Gb,[a.b,t.j,t.p]),t.Cb(4608,a.Jb,a.Jb,[a.b,t.j,t.p]),t.Cb(1073742336,o.c,o.c,[]),t.Cb(1073742336,x.o,x.o,[]),t.Cb(1073742336,x.g,x.g,[]),t.Cb(1073742336,a.Db,a.Db,[]),t.Cb(1073742336,r.p,r.p,[[2,r.u],[2,r.m]]),t.Cb(1073742336,A,A,[]),t.Cb(1073742336,e,e,[]),t.Cb(1024,r.k,(function(){return[[{path:"",component:d},{path:":assignmentId",loadChildren:v}]]}),[])])}))},t8u9:function(n,l,s){"use strict";s.d(l,"a",(function(){return g}));var t=s("2Vo4"),e=s("AytR"),i=s("gFX4"),u=s.n(i),a=s("vkgz"),r=s("8Y7J"),o=s("IheW");const b=e.a.apiSocketUrl,c=e.a.apiUrl;let g=(()=>{class n{constructor(n){this.http=n,this.assignments=[],this.assignmentChanged=new t.a([])}getAssignments(){this.http.get(c+"user/assignments").subscribe(n=>{this.assignments=n.assignments,this.assignmentChanged.next(this.assignments)});const n=u()(b);n.on("assignments",n=>{"admincreate"===n.action?this.addAssignments(n.assignment):"admin_delete"===n.action&&this.deleteAssignments(n.assignmentId)}),n.on("lecturer_assignments",n=>{"lecturercreate"===n.action?this.addAssignments(n.assignment):"delete"===n.action&&this.deleteAssignments(n.assignmentId)})}addAssignments(n){this.assignments.unshift(n),this.assignmentChanged.next(this.assignments)}deleteAssignments(n){const l=[...this.assignments].filter(l=>l._id!==n);this.assignments=l,this.assignmentChanged.next(this.assignments)}getAssignmentChanged(){return this.assignmentChanged.asObservable()}getAssignmentById(n){return this.http.get(c+"user/assignment/"+n)}submitAssignment(n,l,s){const t=new FormData;return t.append("assignmentId",n),t.append("attachment",l),t.append("attachmentString",s),this.http.post(c+"user/assignment/submit",t).pipe(Object(a.a)(l=>{const s=this.assignments.findIndex(l=>l._id===n);this.assignments[s]=l.assignment,this.assignmentChanged.next(this.assignments)}))}}return n.ngInjectableDef=r.Qb({factory:function(){return new n(r.Rb(o.c))},token:n,providedIn:"root"}),n})()}}]);